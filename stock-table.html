<!-- Section Tableau Stock -->
<section id="stock-table" class="section">
  <div class="text-2xl font-semibold text-gray-800 mb-6">ðŸ“¦ Tableau du stock total</div>
  <div class="overflow-x-auto">
    <table class="min-w-full bg-white rounded-xl shadow">
      <thead class="bg-[var(--color-primaire)] text-white">
        <tr>
          <th class="py-3 px-4 text-left">RÃ©fÃ©rence</th>
          <th class="py-3 px-4 text-left">DÃ©signation</th>
          <th class="py-3 px-4 text-left">QuantitÃ©</th>
          <th class="py-3 px-4 text-left">Emplacement</th>
          <th class="py-3 px-4 text-left">Prix HT</th>
        </tr>
      </thead>
      <tbody id="stockTableBody" class="text-gray-700 divide-y divide-gray-200">
        <!-- Les lignes du tableau seront insÃ©rÃ©es ici -->
      </tbody>
    </table>
  </div>
</section>

<!-- Script pour rÃ©cupÃ©rer et afficher les donnÃ©es -->
<script>
    const SUPABASE_URL = "https://xkrpljsulrjsmtmkeefc.supabase.co";
    const SUPABASE_API_KEY = "ton API public";  // Remplace avec ta clÃ© API

    fetch(`${SUPABASE_URL}/rest/v1/stock`, {
      method: "GET",
      headers: {
        apikey: SUPABASE_API_KEY,
        Authorization: `Bearer ${SUPABASE_API_KEY}`,
        "Content-Type": "application/json"
      }
    })
      .then((res) => res.json())
      .then((data) => {
        const tbody = document.getElementById("stockTableBody");  // RÃ©cupÃ©rer l'Ã©lÃ©ment tbody
        if (tbody) {
          tbody.innerHTML = "";  // Effacer les lignes prÃ©cÃ©dentes

          // Remplir le tableau avec les nouvelles donnÃ©es
          data.forEach((item) => {
            tbody.innerHTML += `
              <tr>
                <td class="py-3 px-4">${item.reference || ""}</td>
                <td class="py-3 px-4">${item.designation || ""}</td>
                <td class="py-3 px-4">${item.quantite || 0}</td>
                <td class="py-3 px-4">${item.emplacement || ""}</td>
                <td class="py-3 px-4">${item.prix_ht ? item.prix_ht.toFixed(2) + " â‚¬" : ""}</td>
              </tr>
            `;
          });
        } else {
          console.error("tbody non trouvÃ©");
        }
      })
      .catch((err) => {
        console.error("Erreur chargement Supabase :", err);
      });
</script>
